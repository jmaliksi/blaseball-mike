<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>blaseball_mike.models.base API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>blaseball_mike.models.base</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import abc
import functools
import re


class _LazyLoadDecorator:

    def __init__(self, function, original_name, cache_name=None, default_value=None, use_default=True,
                 key_replace_name=None):
        &#34;&#34;&#34;
        Lazy Loading Class Decorator

        This generates both a getter and setter for and attribute named after the attached function to allow for
        custom processing of the data without requiring a different name for the field. When the attribute is set,
        the value is instead saved in an attribute defined by `original_name`. This value can then be used
        in the attached function to return a custom value without needing to lose the original.

        This also includes some optional features:
        * The computation can be cached to a separate attribute, defined by `cache_name`. This will then be used
          if the value is requested multiple times rather than calling the function again. By default it will not cache.
        * A default value can be returned if the variable has never been set, defined by `default_value`. If you
          instead want this to call the attached function anyway, set `use_default` to False.
        * A lookup dictionary (`key_replace_name`) can be generated upon the setter being called, which will map the
          attribute name to the location of the original value. This is useful for cases where you want to map back to
          the original value programmatically.
        &#34;&#34;&#34;
        functools.update_wrapper(self, function)
        self.func = function
        self.name = function.__name__
        self.original_name = original_name
        self.cache_name = cache_name
        self.default_value = default_value
        self.use_default = use_default
        self.key_replace_name = key_replace_name

    def __get__(self, obj, objtype=None):
        if self.use_default and not getattr(obj, self.original_name, None):
            return self.default_value

        if self.cache_name:
            cache = getattr(obj, self.cache_name, None)
            if cache:
                return cache

        value = self.func(obj)
        if self.cache_name:
            setattr(obj, self.cache_name, value)
        return value

    def __set__(self, obj, value):
        setattr(obj, self.original_name, value)

        if self.cache_name:
            setattr(obj, self.cache_name, None)

        if self.key_replace_name:
            key_lookup = getattr(obj, self.key_replace_name)
            key_lookup[self.name] = self.original_name
            setattr(obj, self.key_replace_name, key_lookup)


class Base(abc.ABC):
    &#34;&#34;&#34;
    Base class for all blaseball-mike models. Provides common functionality for
    deserializing blaseball API responses.

    To accommodate the ever-changing nature of the blaseball API, blaseball_mike mainly infers
    properties from the returned JSON rather than explicitly mapping each property. This means
    that documentation of available fields with ultimately be incomplete. The easiest way
    to find available properties outside of looking at the spec is to look at the `fields`
    property to see what JSON keys have been deserialized.
    &#34;&#34;&#34;

    _camel_to_snake_re = re.compile(r&#39;(?&lt;!^)(?=[A-Z])&#39;)

    def __init__(self, data, strict=False):
        self.fields = []
        self.key_transform_lookup = {}
        for key, value in data.items():
            self.fields.append(key)
            try:
                setattr(self, Base._from_api_conversion(key), value)
            except AttributeError:
                if strict:
                    raise

    def __eq__(self, other):
        if isinstance(other, type(self)):
            return self.json() == other.json()
        return NotImplemented

    def __repr__(self):
        try:
            return f&#34;&lt;{self.__class__.__name__}: {self.id}&gt;&#34;
        except AttributeError:
            return super().__repr__()

    @staticmethod
    def _camel_to_snake(name):
        # Blaseball API uses camelCase for fields, convert to the more Pythonistic snake_case
        return Base._camel_to_snake_re.sub(&#39;_&#39;, name).lower()

    @staticmethod
    def _remove_leading_underscores(name):
        # Some fields historically have underscores before them (_id)
        return name.strip(&#39;_&#39;)

    @staticmethod
    def _from_api_conversion(name):
        return Base._remove_leading_underscores(Base._camel_to_snake(name))

    @staticmethod
    def lazy_load(original_name, cache_name=None, default_value=None, use_default=True,
                  key_replace_name=&#34;key_transform_lookup&#34;):
        # Python requires Class Decorators with arguments to be wrapped by a function
        def lazy_wrapper(function):
            return _LazyLoadDecorator(function, original_name, cache_name, default_value, use_default, key_replace_name)
        return lazy_wrapper

    def _custom_key_transform(self, name):
        if name in self.key_transform_lookup:
            return self.key_transform_lookup[name]
        return name

    def json(self):
        &#34;&#34;&#34;Returns dictionary of fields used to generate the original object&#34;&#34;&#34;
        data = {
            f: getattr(self, self._custom_key_transform(self._from_api_conversion(f))) for f in self.fields
        }
        if &#34;timestamp&#34; in data and not isinstance(data[&#34;timestamp&#34;], str):
            data[&#34;timestamp&#34;] = data[&#34;timestamp&#34;].strftime(&#34;%Y-%m-%dT%H:%M:%S.%fZ&#34;)
        return data</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="blaseball_mike.models.base.Base"><code class="flex name class">
<span>class <span class="ident">Base</span></span>
<span>(</span><span>data, strict=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Base class for all blaseball-mike models. Provides common functionality for
deserializing blaseball API responses.</p>
<p>To accommodate the ever-changing nature of the blaseball API, blaseball_mike mainly infers
properties from the returned JSON rather than explicitly mapping each property. This means
that documentation of available fields with ultimately be incomplete. The easiest way
to find available properties outside of looking at the spec is to look at the <code>fields</code>
property to see what JSON keys have been deserialized.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Base(abc.ABC):
    &#34;&#34;&#34;
    Base class for all blaseball-mike models. Provides common functionality for
    deserializing blaseball API responses.

    To accommodate the ever-changing nature of the blaseball API, blaseball_mike mainly infers
    properties from the returned JSON rather than explicitly mapping each property. This means
    that documentation of available fields with ultimately be incomplete. The easiest way
    to find available properties outside of looking at the spec is to look at the `fields`
    property to see what JSON keys have been deserialized.
    &#34;&#34;&#34;

    _camel_to_snake_re = re.compile(r&#39;(?&lt;!^)(?=[A-Z])&#39;)

    def __init__(self, data, strict=False):
        self.fields = []
        self.key_transform_lookup = {}
        for key, value in data.items():
            self.fields.append(key)
            try:
                setattr(self, Base._from_api_conversion(key), value)
            except AttributeError:
                if strict:
                    raise

    def __eq__(self, other):
        if isinstance(other, type(self)):
            return self.json() == other.json()
        return NotImplemented

    def __repr__(self):
        try:
            return f&#34;&lt;{self.__class__.__name__}: {self.id}&gt;&#34;
        except AttributeError:
            return super().__repr__()

    @staticmethod
    def _camel_to_snake(name):
        # Blaseball API uses camelCase for fields, convert to the more Pythonistic snake_case
        return Base._camel_to_snake_re.sub(&#39;_&#39;, name).lower()

    @staticmethod
    def _remove_leading_underscores(name):
        # Some fields historically have underscores before them (_id)
        return name.strip(&#39;_&#39;)

    @staticmethod
    def _from_api_conversion(name):
        return Base._remove_leading_underscores(Base._camel_to_snake(name))

    @staticmethod
    def lazy_load(original_name, cache_name=None, default_value=None, use_default=True,
                  key_replace_name=&#34;key_transform_lookup&#34;):
        # Python requires Class Decorators with arguments to be wrapped by a function
        def lazy_wrapper(function):
            return _LazyLoadDecorator(function, original_name, cache_name, default_value, use_default, key_replace_name)
        return lazy_wrapper

    def _custom_key_transform(self, name):
        if name in self.key_transform_lookup:
            return self.key_transform_lookup[name]
        return name

    def json(self):
        &#34;&#34;&#34;Returns dictionary of fields used to generate the original object&#34;&#34;&#34;
        data = {
            f: getattr(self, self._custom_key_transform(self._from_api_conversion(f))) for f in self.fields
        }
        if &#34;timestamp&#34; in data and not isinstance(data[&#34;timestamp&#34;], str):
            data[&#34;timestamp&#34;] = data[&#34;timestamp&#34;].strftime(&#34;%Y-%m-%dT%H:%M:%S.%fZ&#34;)
        return data</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li>abc.ABC</li>
</ul>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="blaseball_mike.models.election.Blessing" href="election.html#blaseball_mike.models.election.Blessing">Blessing</a></li>
<li><a title="blaseball_mike.models.election.BlessingResult" href="election.html#blaseball_mike.models.election.BlessingResult">BlessingResult</a></li>
<li><a title="blaseball_mike.models.election.Decree" href="election.html#blaseball_mike.models.election.Decree">Decree</a></li>
<li><a title="blaseball_mike.models.election.DecreeResult" href="election.html#blaseball_mike.models.election.DecreeResult">DecreeResult</a></li>
<li><a title="blaseball_mike.models.election.Election" href="election.html#blaseball_mike.models.election.Election">Election</a></li>
<li><a title="blaseball_mike.models.election.ElectionResult" href="election.html#blaseball_mike.models.election.ElectionResult">ElectionResult</a></li>
<li><a title="blaseball_mike.models.election.Gift" href="election.html#blaseball_mike.models.election.Gift">Gift</a></li>
<li><a title="blaseball_mike.models.election.TidingResult" href="election.html#blaseball_mike.models.election.TidingResult">TidingResult</a></li>
<li><a title="blaseball_mike.models.election.Will" href="election.html#blaseball_mike.models.election.Will">Will</a></li>
<li><a title="blaseball_mike.models.feed.Feed" href="feed.html#blaseball_mike.models.feed.Feed">Feed</a></li>
<li><a title="blaseball_mike.models.fight.Fight.DamageResults" href="fight.html#blaseball_mike.models.fight.Fight.DamageResults">Fight.DamageResults</a></li>
<li><a title="blaseball_mike.models.game.Game" href="game.html#blaseball_mike.models.game.Game">Game</a></li>
<li><a title="blaseball_mike.models.global_event.GlobalEvent" href="global_event.html#blaseball_mike.models.global_event.GlobalEvent">GlobalEvent</a></li>
<li><a title="blaseball_mike.models.item.Item" href="item.html#blaseball_mike.models.item.Item">Item</a></li>
<li><a title="blaseball_mike.models.leaderboard.Idol" href="leaderboard.html#blaseball_mike.models.leaderboard.Idol">Idol</a></li>
<li><a title="blaseball_mike.models.leaderboard.Tribute" href="leaderboard.html#blaseball_mike.models.leaderboard.Tribute">Tribute</a></li>
<li><a title="blaseball_mike.models.league.Division" href="league.html#blaseball_mike.models.league.Division">Division</a></li>
<li><a title="blaseball_mike.models.league.League" href="league.html#blaseball_mike.models.league.League">League</a></li>
<li><a title="blaseball_mike.models.league.Subleague" href="league.html#blaseball_mike.models.league.Subleague">Subleague</a></li>
<li><a title="blaseball_mike.models.league.Tiebreaker" href="league.html#blaseball_mike.models.league.Tiebreaker">Tiebreaker</a></li>
<li><a title="blaseball_mike.models.modification.Modification" href="modification.html#blaseball_mike.models.modification.Modification">Modification</a></li>
<li><a title="blaseball_mike.models.player.Player" href="player.html#blaseball_mike.models.player.Player">Player</a></li>
<li><a title="blaseball_mike.models.playoff.Playoff" href="playoff.html#blaseball_mike.models.playoff.Playoff">Playoff</a></li>
<li><a title="blaseball_mike.models.playoff.PlayoffMatchup" href="playoff.html#blaseball_mike.models.playoff.PlayoffMatchup">PlayoffMatchup</a></li>
<li><a title="blaseball_mike.models.playoff.PlayoffRound" href="playoff.html#blaseball_mike.models.playoff.PlayoffRound">PlayoffRound</a></li>
<li><a title="blaseball_mike.models.season.Season" href="season.html#blaseball_mike.models.season.Season">Season</a></li>
<li><a title="blaseball_mike.models.season.Standings" href="season.html#blaseball_mike.models.season.Standings">Standings</a></li>
<li><a title="blaseball_mike.models.simulation_data.SimulationData" href="simulation_data.html#blaseball_mike.models.simulation_data.SimulationData">SimulationData</a></li>
<li><a title="blaseball_mike.models.stadium.Renovation" href="stadium.html#blaseball_mike.models.stadium.Renovation">Renovation</a></li>
<li><a title="blaseball_mike.models.stadium.Stadium" href="stadium.html#blaseball_mike.models.stadium.Stadium">Stadium</a></li>
<li><a title="blaseball_mike.models.statsheet.GameStatsheet" href="statsheet.html#blaseball_mike.models.statsheet.GameStatsheet">GameStatsheet</a></li>
<li><a title="blaseball_mike.models.statsheet.PlayerStatsheet" href="statsheet.html#blaseball_mike.models.statsheet.PlayerStatsheet">PlayerStatsheet</a></li>
<li><a title="blaseball_mike.models.statsheet.SeasonStatsheet" href="statsheet.html#blaseball_mike.models.statsheet.SeasonStatsheet">SeasonStatsheet</a></li>
<li><a title="blaseball_mike.models.statsheet.TeamStatsheet" href="statsheet.html#blaseball_mike.models.statsheet.TeamStatsheet">TeamStatsheet</a></li>
<li><a title="blaseball_mike.models.team.Team" href="team.html#blaseball_mike.models.team.Team">Team</a></li>
<li><a title="blaseball_mike.models.weather.Weather" href="weather.html#blaseball_mike.models.weather.Weather">Weather</a></li>
<li><a title="blaseball_mike.stream_model.StreamComponent" href="../stream_model.html#blaseball_mike.stream_model.StreamComponent">StreamComponent</a></li>
<li><a title="blaseball_mike.stream_model.StreamData" href="../stream_model.html#blaseball_mike.stream_model.StreamData">StreamData</a></li>
</ul>
<h3>Static methods</h3>
<dl>
<dt id="blaseball_mike.models.base.Base.lazy_load"><code class="name flex">
<span>def <span class="ident">lazy_load</span></span>(<span>original_name, cache_name=None, default_value=None, use_default=True, key_replace_name='key_transform_lookup')</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@staticmethod
def lazy_load(original_name, cache_name=None, default_value=None, use_default=True,
              key_replace_name=&#34;key_transform_lookup&#34;):
    # Python requires Class Decorators with arguments to be wrapped by a function
    def lazy_wrapper(function):
        return _LazyLoadDecorator(function, original_name, cache_name, default_value, use_default, key_replace_name)
    return lazy_wrapper</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="blaseball_mike.models.base.Base.json"><code class="name flex">
<span>def <span class="ident">json</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Returns dictionary of fields used to generate the original object</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def json(self):
    &#34;&#34;&#34;Returns dictionary of fields used to generate the original object&#34;&#34;&#34;
    data = {
        f: getattr(self, self._custom_key_transform(self._from_api_conversion(f))) for f in self.fields
    }
    if &#34;timestamp&#34; in data and not isinstance(data[&#34;timestamp&#34;], str):
        data[&#34;timestamp&#34;] = data[&#34;timestamp&#34;].strftime(&#34;%Y-%m-%dT%H:%M:%S.%fZ&#34;)
    return data</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="blaseball_mike.models" href="index.html">blaseball_mike.models</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="blaseball_mike.models.base.Base" href="#blaseball_mike.models.base.Base">Base</a></code></h4>
<ul class="">
<li><code><a title="blaseball_mike.models.base.Base.json" href="#blaseball_mike.models.base.Base.json">json</a></code></li>
<li><code><a title="blaseball_mike.models.base.Base.lazy_load" href="#blaseball_mike.models.base.Base.lazy_load">lazy_load</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>